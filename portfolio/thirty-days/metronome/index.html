<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="../../../portfolio/nav/portfolioNavigation.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <title>Metronome</title>
  </head>
  <body>
    <div class="metronome">
      <div class="face">
        <div class="count"></div>
        <div class="hand"></div>
      </div>
    </div>
    <div id="bpmBox">
      <label for="tempo">BPM: </label>
      <input id="tempo" type="number" min="33" max="250" value="60" />
    </div>
    <script type="module">
      import { portfolioNavigation } from "../../../portfolio/nav/portfolioNavigation.js";
      import { portfolioData } from "../../mockJson.js";

      // portfolioNavigation("currentFileAsNamedInJSON", "currentProject", JSON)
      portfolioNavigation("metronome", "thirtyDays", portfolioData);
      const hand = document.querySelector(".hand");

      const tempo = document.getElementById("tempo");
      let time = 1000;
      let transition = "all 1s linear";
      let interval;
      let count = 0;
      let countMax = 4;
      function changeTempo(tempo) {
        console.log(tempo);
        let value = 60 / tempo.target.value;
        hand.style.transition = `all ${value}s linear`;
        console.log("hand.style.transition: ", hand.style.transition);
        console.log("value: ", value);
        // hand.style.transform === `rotate(180deg)`;
        if (interval) {
          clearInterval(interval);
        }
        interval = setInterval(setRhythmn, value * 1000);
      }

      function setRhythmn() {
        if (count === countMax) {
          count = 1;
        } else {
          count++;
        }
        document.querySelector(".count").innerHTML = count;

        if (document.querySelector(".oneSide")) {
          hand.classList.remove("oneSide");
          hand.classList.add("theOther");
        } else if (document.querySelector(".theOther")) {
          hand.classList.remove("theOther");
          hand.classList.add("oneSide");
        } else {
          hand.classList.add("theOther");
        }
      }

      tempo.addEventListener("change", changeTempo);
      tempo.addEventListener("focusout", changeTempo);
    </script>
  </body>
</html>

<!-- 
    
    Click button Change tempo
    change button changes time & transition
    runs setRhythmn


-->
